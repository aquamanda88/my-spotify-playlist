(function(){"use strict";var e={658:function(e,t,o){var n=o(719),a=o(723);const r={class:"d-flex justify-content-center"};function s(e,t){const o=(0,a.up)("router-view"),n=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(o),(0,a._)("nav",r,[(0,a.Wm)(n,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1})])],64)}var l=o(896);const i={},c=(0,l.Z)(i,[["render",s]]);var u=c,d=o(907);const p={class:"py-4"};function f(e,t,o,n,r,s){const l=(0,a.up)("HelloWorld");return(0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(l)])}var m=o(485),v=o(446),h=o(386),_=o.p+"img/icon_spotify_white.9b33d1e2.svg",g=o.p+"img/icon_down_arrow.62db7094.svg",b=o.p+"img/icon_access_time.5a2e6b04.svg",w=o(483),y=o(439),k=o.n(y);const O=w.Z.create({baseURL:"https://api.spotify.com/v1/me/top/"});O.interceptors.request.use((e=>e),(e=>Promise.reject(e))),O.interceptors.response.use((e=>e),(e=>("get"===e.response.config.method?404===e.response.status?k().fire({icon:"error",title:`(${e.response.status})`,text:e.message}):k().fire({icon:"error",title:`(${e.response.status})`,text:e.response.data.error?.message}):"post"===e.response.config.method&&k().fire({icon:"error",title:`(${e.response.status}) ${e.response.data.error}`,text:e.response.data?.error_description}),Promise.reject(e))));var D=O;let z={};class E{getArtists(e,t){const o=this.formatValue(e,t),n=window.sessionStorage.getItem("access_token");return D.get(`artists${o}`,{headers:{Authorization:`Bearer ${n}`}})}getTracks(e,t){const o=this.formatValue(e,t),n=window.sessionStorage.getItem("access_token");return D.get(`tracks${o}`,{headers:{Authorization:`Bearer ${n}`}})}formatValue(e,t){let o="";return void 0===e&&void 0===t?"":e&&void 0===t?`?limit=${e}`:void 0===e&&t?`?limit=20&time_range=${t}`:e&&t?`?limit=${e}&time_range=${t}`:o}getApiType(e){const t=e.indexOf("v1/me/top/")+10,o=e.indexOf("?");return-1!==o?e.substring(t,o):e.split("v1/me/top/")[1]}errorHandler(e){400===e.response.status&&(z=e.response.data)}}var T=new E;const j={dev_server:"http://localhost:8080",dev_server_base:"http%3A%2F%2Flocalhost%3A8080%2F",production_server:"https://aquamanda88.github.io",production_server_base:"https%3A%2F%2Faquamanda88.github.io%2F"},N={DEV_SERVER:j.dev_server,DEV_TOKEN:j.dev_server_base,PROD_SERVER:j.production_server,PROD_TOKEN:j.production_server_base},R=window.location.href.includes("/localhost:8080/"),A=R?N.DEV_TOKEN:N.PROD_TOKEN,H={AUTHORIZATION_URL:`https://accounts.spotify.com/authorize?client_id=4bcd4abea30c43359b72b03b45497cad&response_type=code&redirect_uri=${A}my-spotify-playlist&scope=user-top-read`,ENCODE_TOKEN:"NGJjZDRhYmVhMzBjNDMzNTliNzJiMDNiNDU0OTdjYWQ6Yjc0NzEyYzg5OWZiNDhkNmE5OGQxZjM2YjQzNDE0ZjU="},x=window.location.href.includes("/localhost:8080/"),$=x?`${N.DEV_SERVER}/my-spotify-playlist`:`${N.PROD_SERVER}/my-spotify-playlist`,S=`Basic ${H.ENCODE_TOKEN}`,P="https://accounts.spotify.com/api/token";let I={};class U{getAuthorizationToken(e){const t=new URLSearchParams;return t.append("code",e),t.append("grant_type","authorization_code"),t.append("redirect_uri",$),D.post(`${P}`,t,{headers:{"content-type":"application/x-www-form-urlencoded",Authorization:S}})}async getFreshToken(){const e=window.sessionStorage.getItem("refresh_token"),t=new URLSearchParams;return t.append("grant_type","refresh_token"),t.append("refresh_token",e),D.post(`${P}`,t,{headers:{Authorization:S}})}errorHandler(e){400===e.response.status&&(I=e.response.data)}}var K=new U;const Y={class:"container"},C=["href"],V=(0,a._)("div",{class:"d-flex align-items-center"},[(0,a._)("img",{class:"me-2",src:_,alt:"spotifyIcon"}),(0,a._)("span",null,"LOGIN")],-1),F=[V],M={key:0},B={class:"single-operation-board card"},Z=(0,a._)("h3",{class:"font-zh-h3"},"查詢條件",-1),q={id:"searchForm"},L={class:"card-body"},W={class:"row"},G={class:"col-12"},Q={class:"form-check-group"},J=(0,a._)("p",{class:"font-zh-p-medium"},"資料類型",-1),X={class:"form-check-list d-flex"},ee=["id","value","checked"],te=["for"],oe={class:"col-12"},ne={class:"form-check-group"},ae=(0,a._)("p",{class:"font-zh-p-medium"},"時間區間",-1),re={class:"form-check-list d-flex"},se=["id","value","checked"],le=["for"],ie={class:"col-12"},ce={class:"row"},ue=(0,a._)("p",{class:"font-zh-p-medium"},"資料筆數",-1),de={class:"col-6"},pe={class:"form-check-group"},fe={class:"dropdown"},me={class:"d-flex justify-content-between w-100"},ve={class:"dropdown-menu"},he={class:"menuBoard dropdown-items","aria-labelledby":"dropdownMenuButton1"},_e=["value"],ge={class:"col-6"},be=(0,a._)("p",null,"查詢",-1),we=[be],ye={key:0,class:"table table-hover","data-bs-theme":"dark"},ke=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"#"),(0,a._)("th",{scope:"col",colspan:"2"},"演出者"),(0,a._)("th",{scope:"col"},"曲風"),(0,a._)("th",{scope:"col"},"知名度 (0-100)")])],-1),Oe={scope:"row"},De=["src"],ze={class:"contentInfo"},Ee={class:"songName"},Te={class:"text-start"},je={key:0},Ne={key:0},Re={key:1},Ae={key:1,class:"table table-hover","data-bs-theme":"dark"},He=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"#"),(0,a._)("th",{scope:"col",colspan:"2"},"標題"),(0,a._)("th",{scope:"col"},"專輯"),(0,a._)("th",{scope:"col"},[(0,a._)("img",{src:b,alt:"time"})])])],-1),xe={scope:"row"},$e=["src"],Se={class:"contentInfo"},Pe={class:"songName"},Ie={key:0},Ue={key:0},Ke={key:1},Ye={class:"text-start"};var Ce=(0,a.aZ)({__name:"HelloWorld",setup(e){const t=(0,v.iH)([]),o=(0,v.iH)([]),n=(0,v.iH)(!1),r=(0,v.iH)(""),s=(0,v.iH)(""),l=(0,v.iH)(!1),i=[{label:"曲目",value:"tracks"},{label:"演出者",value:"artists"}],c=[{label:"近一個月",value:"short_term"},{label:"近六個月",value:"medium_term"},{label:"全部時間",value:"long_term"}],u=[{label:"10",value:"10"},{label:"15",value:"15"},{label:"20",value:"20"},{label:"25",value:"25"},{label:"30",value:"30"},{label:"35",value:"35"},{label:"40",value:"40"},{label:"45",value:"45"},{label:"50",value:"50"}];async function d(e){const t=await K.getAuthorizationToken(e),o=t.data.access_token,n=t.data.refresh_token;return{authorization:o,refreshToken:n}}async function p(e,o){const a=await T.getArtists(e,o);n.value=0===Object.keys(z).length,a&&(r.value=T.getApiType(a?.data.href),t.value=a?.data?.items)}async function f(e,t){const a=await T.getTracks(e,t);n.value=0===Object.keys(z).length,a&&(r.value=T.getApiType(a?.data.href),o.value=a?.data?.items,o.value.forEach((e=>{if("number"===typeof e.duration_ms){const t=Math.floor(e.duration_ms/1e3/60);let o=Math.floor(e.duration_ms/1e3%60);const n=1===o.toString().length?`0${o}`:o;e.duration_ms=`${t}:${n}`}})))}function m(e){s.value=e.target.value}function _(){const e=document.getElementById("searchForm"),t=e.elements.namedItem("dataType"),o=s.value?s.value:"20",n=e.elements.namedItem("timeRange").value;"tracks"===t.value?f(o,n):"artists"===t.value&&p(o,n)}return(0,a.bv)((()=>{const e=new URLSearchParams(window.location.search);if(e.has("code")){const t=e.get("code");d(t).then((e=>(window.sessionStorage.setItem("access_token",e.authorization),window.sessionStorage.setItem("refresh_token",e.refreshToken),n.value=!0,e))).catch((e=>{throw e}))}else window.sessionStorage.removeItem("access_token")})),(e,d)=>((0,a.wg)(),(0,a.iD)("div",Y,[(0,a._)("a",{class:"btn btn-main font-en-button mb-4",href:(0,v.SU)(H).AUTHORIZATION_URL},F,8,C),n.value?((0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("div",B,[Z,(0,a._)("form",q,[(0,a._)("div",L,[(0,a._)("div",W,[(0,a._)("div",G,[(0,a._)("div",Q,[J,(0,a._)("div",X,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(i,(e=>(0,a._)("div",{key:e.value,class:"form-check"},[(0,a._)("input",{id:e.value,value:e.value,class:"form-check-input",name:"dataType",type:"radio",checked:"tracks"===e.value},null,8,ee),(0,a._)("label",{for:e.value,class:"font-zh-p-medium form-check-label"},(0,h.zw)(e.label),9,te)]))),64))])])]),(0,a._)("div",oe,[(0,a._)("div",ne,[ae,(0,a._)("div",re,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(c,(e=>(0,a._)("div",{key:e.value,class:"form-check"},[(0,a._)("input",{id:e.value,value:e.value,class:"form-check-input",name:"timeRange",type:"radio",checked:"medium_term"===e.value},null,8,se),(0,a._)("label",{for:e.value,class:"font-zh-p-medium form-check-label"},(0,h.zw)(e.label),9,le)]))),64))])])]),(0,a._)("div",ie,[(0,a._)("div",ce,[ue,(0,a._)("div",de,[(0,a._)("div",pe,[(0,a._)("div",fe,[(0,a._)("button",{class:"default-select font-zh-p-medium form-control",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",onBlur:d[0]||(d[0]=e=>l.value=!1),onClick:d[1]||(d[1]=e=>l.value=!l.value)},[(0,a._)("div",me,[(0,a._)("p",null,(0,h.zw)(s.value?s.value:"請選擇"),1),(0,a._)("img",{class:(0,h.C_)([{"not-active":!l.value},"icon-arrow-down-gray"]),src:g,alt:"arrow"},null,2)])],32),(0,a._)("div",ve,[(0,a._)("ul",he,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(u,(e=>(0,a._)("li",{key:e.value},[(0,a._)("button",{class:"dropdown-item",type:"button",value:e.value,onClick:d[2]||(d[2]=e=>m(e))},(0,h.zw)(e.label),9,_e)]))),64))])])])])]),(0,a._)("div",ge,[(0,a._)("button",{class:"default-input font-zh-p-medium btn btn-main",type:"button",onClick:d[3]||(d[3]=e=>_())},we)])])])])])])]),"artists"===r.value?((0,a.wg)(),(0,a.iD)("table",ye,[ke,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:e.uri},[(0,a._)("th",Oe,(0,h.zw)(t+1),1),(0,a._)("td",null,[(0,a._)("img",{src:e.images[2].url,alt:"artistUrl"},null,8,De)]),(0,a._)("td",ze,[(0,a._)("p",Ee,(0,h.zw)(e.name),1)]),(0,a._)("td",Te,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.genres,((t,o)=>((0,a.wg)(),(0,a.iD)("span",{key:o,class:"artistsGenres"},[1!==e.genres.length?((0,a.wg)(),(0,a.iD)("span",je,[0!==o?((0,a.wg)(),(0,a.iD)("span",Ne,", ")):(0,a.kq)("",!0),(0,a.Uk)((0,h.zw)(t),1)])):((0,a.wg)(),(0,a.iD)("span",Re,(0,h.zw)(t),1))])))),128))]),(0,a._)("td",null,(0,h.zw)(e.popularity),1)])))),128))])])):(0,a.kq)("",!0),"tracks"===r.value?((0,a.wg)(),(0,a.iD)("table",Ae,[He,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.value,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:e.uri},[(0,a._)("th",xe,(0,h.zw)(t+1),1),(0,a._)("td",null,[(0,a._)("img",{src:e.album.images[2].url,alt:"albumUrl"},null,8,$e)]),(0,a._)("td",Se,[(0,a._)("p",Pe,(0,h.zw)(e.name),1),(0,a._)("p",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.artists,((t,o)=>((0,a.wg)(),(0,a.iD)("span",{key:t.id,class:"artistsName"},[1!==e.artists.length?((0,a.wg)(),(0,a.iD)("span",Ie,[0!==o?((0,a.wg)(),(0,a.iD)("span",Ue,", ")):(0,a.kq)("",!0),(0,a.Uk)((0,h.zw)(t.name),1)])):((0,a.wg)(),(0,a.iD)("span",Ke,(0,h.zw)(t.name),1))])))),128))])]),(0,a._)("td",Ye,(0,h.zw)(e.album.name),1),(0,a._)("td",null,(0,h.zw)(e.duration_ms),1)])))),128))])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]))}});const Ve=Ce;var Fe=Ve,Me=function(e,t,o,n){var a,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};let Be=class extends m.w3{};Be=Me([(0,m.Ei)({components:{HelloWorld:Fe}})],Be);var Ze=Be;const qe=(0,l.Z)(Ze,[["render",f]]);var Le=qe;const We=[{path:"/",name:"home",component:Le},{path:"/about",name:"about",component:()=>o.e(939).then(o.bind(o,939))}],Ge=(0,d.p7)({history:(0,d.PO)("/my-spotify-playlist/"),routes:We});var Qe=Ge;o(583);(0,n.ri)(u).use(Qe).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,r){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],r=e[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&r||s>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(l=!1,r<s&&(s=r));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+".2948671f.js"}}(),function(){o.miniCssF=function(e){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="my-spotify-playlist:";o.l=function(n,a,r,s){if(e[n])e[n].push(a);else{var l,i;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){l=d;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",t+r),l.src=n),e[n]=[a];var p=function(t,o){l.onerror=l.onload=null,clearTimeout(f);var a=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(e){return e(o)})),t)return t(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/my-spotify-playlist/"}(),function(){var e={143:0};o.f.j=function(t,n){var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise((function(o,n){a=e[t]=[o,n]}));n.push(a[2]=r);var s=o.p+o.u(t),l=new Error,i=function(n){if(o.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",l.name="ChunkLoadError",l.type=r,l.request=s,a[1](l)}};o.l(s,i,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,s=n[0],l=n[1],i=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var u=i(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=self["webpackChunkmy_spotify_playlist"]=self["webpackChunkmy_spotify_playlist"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(658)}));n=o.O(n)})();
//# sourceMappingURL=app.3889455b.js.map