(function(){"use strict";var e={247:function(e,t,o){var a=o(719),n=o(723);function s(e,t){const o=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(o)}var r=o(896);const l={},i=(0,r.Z)(l,[["render",s]]);var c=i,u=o(907);const d={class:"py-4"};function p(e,t,o,a,s,r){const l=(0,n.up)("HelloWorld");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(l)])}var f=o(485),m=o(446),v=o(386),_=o.p+"img/Spotify_Icon_RGB_White.0dd85e71.png",h=o.p+"img/icon_down_arrow.62db7094.svg",g=o.p+"img/Spotify_Logo_RGB_White.37f390ae.png",w=o.p+"img/icon_access_time.5a2e6b04.svg",y=o(483),b=o(439),k=o.n(b);const D=y.Z.create({baseURL:"https://api.spotify.com/v1/me"});D.interceptors.request.use((e=>e),(e=>Promise.reject(e))),D.interceptors.response.use((e=>e),(e=>("get"===e.response.config.method?(403===e.response.status&&k().fire({icon:"error",title:`(${e.response.status})`,text:e.response?.data}),404===e.response.status?k().fire({icon:"error",title:`(${e.response.status})`,text:e.message}):k().fire({icon:"error",title:`(${e.response.status})`,text:e.response.data.error?.message})):"post"===e.response.config.method&&k().fire({icon:"error",title:`(${e.response.status}) ${e.response.data.error}`,text:e.response.data?.error_description}),Promise.reject(e))));var O=D;let z={};class E{getUser(){const e=window.sessionStorage.getItem("access_token");return O.get("",{headers:{Authorization:`Bearer ${e}`}})}getArtists(e,t){const o=this.formatValue(e,t),a=window.sessionStorage.getItem("access_token");return O.get(`/top/artists${o}`,{headers:{Authorization:`Bearer ${a}`}})}getTracks(e,t){const o=this.formatValue(e,t),a=window.sessionStorage.getItem("access_token");return O.get(`/top/tracks${o}`,{headers:{Authorization:`Bearer ${a}`}})}formatValue(e,t){let o="";return void 0===e&&void 0===t?"":e&&void 0===t?`?limit=${e}`:void 0===e&&t?`?limit=20&time_range=${t}`:e&&t?`?limit=${e}&time_range=${t}`:o}getApiType(e){const t=e.indexOf("v1/me/top/")+10,o=e.indexOf("?");return-1!==o?e.substring(t,o):e.split("v1/me/top/")[1]}errorHandler(e){400===e.response.status&&(z=e.response.data)}}var R=new E;const S={dev_server:"http://localhost:8080",dev_server_base:"http%3A%2F%2Flocalhost%3A8080%2F",production_server:"https://aquamanda88.github.io",production_server_base:"https%3A%2F%2Faquamanda88.github.io%2F"},T={DEV_SERVER:S.dev_server,DEV_TOKEN:S.dev_server_base,PROD_SERVER:S.production_server,PROD_TOKEN:S.production_server_base},j=window.location.href.includes("/localhost:8080/"),N=j?T.DEV_TOKEN:T.PROD_TOKEN,I={AUTHORIZATION_URL:`https://accounts.spotify.com/authorize?client_id=4bcd4abea30c43359b72b03b45497cad&response_type=code&redirect_uri=${N}my-spotify-playlist&scope=user-top-read%20user-read-private`,ENCODE_TOKEN:"NGJjZDRhYmVhMzBjNDMzNTliNzJiMDNiNDU0OTdjYWQ6Yjc0NzEyYzg5OWZiNDhkNmE5OGQxZjM2YjQzNDE0ZjU="},x=window.location.href.includes("/localhost:8080/"),A=(x?T.DEV_SERVER:T.PROD_SERVER)+"/my-spotify-playlist",H=`Basic ${I.ENCODE_TOKEN}`,P="https://accounts.spotify.com/api/token";let $={};class U{getAuthorizationToken(e){const t=new URLSearchParams;return t.append("code",e),t.append("grant_type","authorization_code"),t.append("redirect_uri",A),O.post(`${P}`,t,{headers:{"content-type":"application/x-www-form-urlencoded",Authorization:H}})}async getFreshToken(){const e=window.sessionStorage.getItem("refresh_token"),t=new URLSearchParams;return t.append("grant_type","refresh_token"),t.append("refresh_token",e),O.post(`${P}`,t,{headers:{Authorization:H}})}errorHandler(e){400===e.response.status&&($=e.response.data)}}var V=new U;const B={class:"container"},K=(0,n._)("div",{class:"d-flex align-items-center"},[(0,n._)("img",{class:"spotifyIcon me-2",src:_,alt:"spotifyIcon"}),(0,n._)("span",null,"Log out")],-1),L=[K],C=["href"],Y=(0,n._)("div",{class:"d-flex align-items-center"},[(0,n._)("img",{class:"spotifyIcon me-2",src:_,alt:"spotifyIcon"}),(0,n._)("span",null,"Log in with Spotify")],-1),F=[Y],M={key:2},Z={class:"single-operation-board card"},q=(0,n._)("h3",{class:"font-zh-h3"},"查詢條件",-1),W={id:"searchForm"},G={class:"card-body"},Q={class:"row"},J={class:"col-12"},X={class:"form-check-group"},ee=(0,n._)("p",{class:"font-zh-p-medium"},"資料類型",-1),te={class:"form-check-list d-flex"},oe=["id","value","checked"],ae=["for"],ne={class:"col-12"},se={class:"form-check-group"},re=(0,n._)("p",{class:"font-zh-p-medium"},"時間區間",-1),le={class:"form-check-list d-flex"},ie=["id","value","checked"],ce=["for"],ue={class:"col-12"},de={class:"row"},pe=(0,n._)("p",{class:"font-zh-p-medium"},"資料筆數",-1),fe={class:"col-6"},me={class:"form-check-group"},ve={class:"dropdown"},_e={class:"d-flex justify-content-between w-100"},he={class:"dropdown-menu"},ge={class:"menuBoard dropdown-items","aria-labelledby":"dropdownMenuButton1"},we=["value"],ye={class:"col-6"},be=(0,n._)("p",null,"查詢",-1),ke=[be],De={key:0,class:"table table-hover","data-bs-theme":"dark"},Oe=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"#"),(0,n._)("th",{scope:"col",colspan:"2"},"演出者"),(0,n._)("th",{scope:"col"},"曲風"),(0,n._)("th",{scope:"col"},"知名度 (0-100)")])],-1),ze={scope:"row"},Ee=["src"],Re={class:"contentInfo"},Se={class:"songName"},Te={class:"text-start"},je={key:0},Ne={key:0},Ie={key:1},xe=(0,n._)("tfoot",null,[(0,n._)("tr",null,[(0,n._)("td",{colspan:"5"},[(0,n._)("img",{src:g,alt:"Spotify_icon"})])])],-1),Ae={key:1,class:"table table-hover","data-bs-theme":"dark"},He=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"#"),(0,n._)("th",{scope:"col",colspan:"2"},"標題"),(0,n._)("th",{scope:"col"},"專輯"),(0,n._)("th",{scope:"col"},[(0,n._)("img",{src:w,alt:"time"})])])],-1),Pe={scope:"row"},$e=["src"],Ue={class:"contentInfo"},Ve=["href"],Be={class:"songName"},Ke={key:0},Le={key:0},Ce={key:1},Ye={class:"text-start"},Fe=(0,n._)("tfoot",null,[(0,n._)("tr",null,[(0,n._)("td",{colspan:"5"},[(0,n._)("img",{src:g,alt:"Spotify_icon"})])])],-1);var Me=(0,n.aZ)({__name:"HelloWorld",setup(e){const t=window.location.href.includes("/localhost:8080/"),o=(t?T.DEV_SERVER:T.PROD_SERVER)+"/my-spotify-playlist",a=(0,m.iH)(""),s=(0,m.iH)([]),r=(0,m.iH)([]),l=(0,m.iH)(!1),i=(0,m.iH)(""),c=(0,m.iH)(""),u=(0,m.iH)(!1),d=[{label:"曲目",value:"tracks"},{label:"演出者",value:"artists"}],p=[{label:"近一個月",value:"short_term"},{label:"近六個月",value:"medium_term"},{label:"全部時間",value:"long_term"}],f=[{label:"10",value:"10"},{label:"15",value:"15"},{label:"20",value:"20"},{label:"25",value:"25"},{label:"30",value:"30"},{label:"35",value:"35"},{label:"40",value:"40"},{label:"45",value:"45"},{label:"50",value:"50"}];async function _(e){const t=await V.getAuthorizationToken(e),o=t.data.access_token,a=t.data.refresh_token;return{authorization:o,refreshToken:a}}async function g(){const e=(await R.getUser()).data;window.sessionStorage.setItem("userName",e.display_name)}async function w(e,t){const o=new URLSearchParams(window.location.search);if(o.has("code")){const o=await R.getArtists(e,t);l.value=0===Object.keys(z).length,o&&(i.value=R.getApiType(o?.data.href),s.value=o?.data?.items)}else l.value=!1}async function y(e,t){const o=new URLSearchParams(window.location.search);if(o.has("code")){const o=await R.getTracks(e,t);l.value=0===Object.keys(z).length,o&&(i.value=R.getApiType(o?.data.href),r.value=o?.data?.items,r.value.forEach((e=>{if("number"===typeof e.duration_ms){const t=Math.floor(e.duration_ms/1e3/60);let o=Math.floor(e.duration_ms/1e3%60);const a=1===o.toString().length?`0${o}`:o;e.duration_ms=`${t}:${a}`}})))}else l.value=!1}function b(e){c.value=e.target.value}function k(){const e=document.getElementById("searchForm"),t=e.elements.namedItem("dataType"),o=c.value?c.value:"20",a=e.elements.namedItem("timeRange").value;"tracks"===t.value?y(o,a):"artists"===t.value&&w(o,a)}return(0,n.bv)((()=>{const e=new URLSearchParams(window.location.search);if(e.has("code")){const t=e.get("code");_(t).then((e=>(window.sessionStorage.setItem("access_token",e.authorization),l.value=!0,g(),e))).catch((e=>{throw e}))}else window.sessionStorage.removeItem("access_token");a.value=window.sessionStorage.getItem("userName")??"-"})),(e,t)=>((0,n.wg)(),(0,n.iD)("div",B,[l.value?((0,n.wg)(),(0,n.iD)("a",{key:0,class:"btn btn-main font-en-button mb-4",href:o},L)):((0,n.wg)(),(0,n.iD)("a",{key:1,class:"btn btn-main font-en-button mb-4",href:(0,m.SU)(I).AUTHORIZATION_URL},F,8,C)),l.value?((0,n.wg)(),(0,n.iD)("div",M,[(0,n._)("div",Z,[q,(0,n._)("form",W,[(0,n._)("div",G,[(0,n._)("div",Q,[(0,n._)("div",J,[(0,n._)("div",X,[ee,(0,n._)("div",te,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(d,(e=>(0,n._)("div",{key:e.value,class:"form-check"},[(0,n._)("input",{id:e.value,value:e.value,class:"form-check-input",name:"dataType",type:"radio",checked:"tracks"===e.value},null,8,oe),(0,n._)("label",{for:e.value,class:"font-zh-p-medium form-check-label"},(0,v.zw)(e.label),9,ae)]))),64))])])]),(0,n._)("div",ne,[(0,n._)("div",se,[re,(0,n._)("div",le,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(p,(e=>(0,n._)("div",{key:e.value,class:"form-check"},[(0,n._)("input",{id:e.value,value:e.value,class:"form-check-input",name:"timeRange",type:"radio",checked:"medium_term"===e.value},null,8,ie),(0,n._)("label",{for:e.value,class:"font-zh-p-medium form-check-label"},(0,v.zw)(e.label),9,ce)]))),64))])])]),(0,n._)("div",ue,[(0,n._)("div",de,[pe,(0,n._)("div",fe,[(0,n._)("div",me,[(0,n._)("div",ve,[(0,n._)("button",{class:"default-select font-zh-p-medium form-control",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",onBlur:t[0]||(t[0]=e=>u.value=!1),onClick:t[1]||(t[1]=e=>u.value=!u.value)},[(0,n._)("div",_e,[(0,n._)("p",null,(0,v.zw)(c.value?c.value:"20"),1),(0,n._)("img",{class:(0,v.C_)([{"not-active":!u.value},"icon-arrow-down-gray"]),src:h,alt:"arrow"},null,2)])],32),(0,n._)("div",he,[(0,n._)("ul",ge,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(f,(e=>(0,n._)("li",{key:e.value},[(0,n._)("button",{class:"dropdown-item",type:"button",value:e.value,onClick:t[2]||(t[2]=e=>b(e))},(0,v.zw)(e.label),9,we)]))),64))])])])])]),(0,n._)("div",ye,[(0,n._)("button",{class:"default-input font-zh-p-medium btn btn-main",type:"button",onClick:t[3]||(t[3]=e=>k())},ke)])])])])])])]),"artists"===i.value?((0,n.wg)(),(0,n.iD)("table",De,[Oe,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.value,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:e.uri},[(0,n._)("th",ze,(0,v.zw)(t+1),1),(0,n._)("td",null,[(0,n._)("img",{src:e.images[2].url,class:"infoImg",alt:"artistUrl"},null,8,Ee)]),(0,n._)("td",Re,[(0,n._)("p",Se,(0,v.zw)(e.name),1)]),(0,n._)("td",Te,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.genres,((t,o)=>((0,n.wg)(),(0,n.iD)("span",{key:o,class:"artistsGenres"},[1!==e.genres.length?((0,n.wg)(),(0,n.iD)("span",je,[0!==o?((0,n.wg)(),(0,n.iD)("span",Ne,", ")):(0,n.kq)("",!0),(0,n.Uk)((0,v.zw)(t),1)])):((0,n.wg)(),(0,n.iD)("span",Ie,(0,v.zw)(t),1))])))),128))]),(0,n._)("td",null,(0,v.zw)(e.popularity),1)])))),128))]),xe])):(0,n.kq)("",!0),"tracks"===i.value?((0,n.wg)(),(0,n.iD)("table",Ae,[He,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.value,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:e.uri},[(0,n._)("th",Pe,(0,v.zw)(t+1),1),(0,n._)("td",null,[(0,n._)("img",{src:e.album.images[2].url,class:"infoImg",alt:"albumUrl"},null,8,$e)]),(0,n._)("td",Ue,[(0,n._)("a",{href:e.external_urls.spotify,target:"_blank"},[(0,n._)("p",Be,(0,v.zw)(e.name),1),(0,n._)("p",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.artists,((t,o)=>((0,n.wg)(),(0,n.iD)("span",{key:t.id,class:"artistsName"},[1!==e.artists.length?((0,n.wg)(),(0,n.iD)("span",Ke,[0!==o?((0,n.wg)(),(0,n.iD)("span",Le,", ")):(0,n.kq)("",!0),(0,n.Uk)((0,v.zw)(t.name),1)])):((0,n.wg)(),(0,n.iD)("span",Ce,(0,v.zw)(t.name),1))])))),128))])],8,Ve)]),(0,n._)("td",Ye,(0,v.zw)(e.album.name),1),(0,n._)("td",null,(0,v.zw)(e.duration_ms),1)])))),128))]),Fe])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)]))}});const Ze=Me;var qe=Ze,We=function(e,t,o,a){var n,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};let Ge=class extends f.w3{};Ge=We([(0,f.Ei)({components:{HelloWorld:qe}})],Ge);var Qe=Ge;const Je=(0,r.Z)(Qe,[["render",p]]);var Xe=Je;const et=[{path:"/",name:"home",component:Xe},{path:"/about",name:"about",component:()=>o.e(939).then(o.bind(o,939))}],tt=(0,u.p7)({history:(0,u.PO)("/my-spotify-playlist/"),routes:et});var ot=tt;o(583);(0,a.ri)(c).use(ot).mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,s){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],s=e[u][2];for(var l=!0,i=0;i<a.length;i++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(l=!1,s<r&&(r=s));if(l){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,n,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,a){return o.f[a](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+".e3c34638.js"}}(),function(){o.miniCssF=function(e){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="my-spotify-playlist:";o.l=function(a,n,s,r){if(e[a])e[a].push(n);else{var l,i;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+s){l=d;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",t+s),l.src=a),e[a]=[n];var p=function(t,o){l.onerror=l.onload=null,clearTimeout(f);var n=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((function(e){return e(o)})),t)return t(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/my-spotify-playlist/"}(),function(){var e={143:0};o.f.j=function(t,a){var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var s=new Promise((function(o,a){n=e[t]=[o,a]}));a.push(n[2]=s);var r=o.p+o.u(t),l=new Error,i=function(a){if(o.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var s=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",l.name="ChunkLoadError",l.type=s,l.request=r,n[1](l)}};o.l(r,i,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,s,r=a[0],l=a[1],i=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(i)var u=i(o)}for(t&&t(a);c<r.length;c++)s=r[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},a=self["webpackChunkmy_spotify_playlist"]=self["webpackChunkmy_spotify_playlist"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(247)}));a=o.O(a)})();
//# sourceMappingURL=app.360343ef.js.map