(function(){"use strict";var e={311:function(e,t,n){var a=n(719),o=n(723);const s={class:"d-flex justify-content-center"};function r(e,t){const n=(0,o.up)("router-link"),a=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",s,[(0,o.Wm)(n,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1}),(0,o.Uk)(" | "),(0,o.Wm)(n,{to:"/about"},{default:(0,o.w5)((()=>[(0,o.Uk)("About")])),_:1})]),(0,o.Wm)(a)],64)}var l=n(896);const i={},c=(0,l.Z)(i,[["render",r]]);var u=c,d=n(907);const p={class:"py-4"};function f(e,t,n,a,s,r){const l=(0,o.up)("HelloWorld");return(0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(l)])}var m=n(485),v=n(446),h=n(386),_=n.p+"img/icon_spotify_white.9b33d1e2.svg",g=n.p+"img/icon_access_time.5a2e6b04.svg",y=n(483);const b=y.Z.create({baseURL:"https://api.spotify.com/v1/me/top/"});b.interceptors.request.use((e=>e),(e=>Promise.reject(e))),b.interceptors.response.use((e=>e),(e=>Promise.reject(e)));var w=b;let k={};class z{getArtists(e,t){const n=this.formatValue(e,t),a=window.sessionStorage.getItem("access_token");return w.get(`artists${n}`,{headers:{Authorization:`Bearer ${a}`}})}getTracks(e,t){const n=this.formatValue(e,t),a=window.sessionStorage.getItem("access_token");return w.get(`tracks${n}`,{headers:{Authorization:`Bearer ${a}`}})}formatValue(e,t){let n="";return void 0===e&&void 0===t?"":e&&void 0===t?`?limit=${e}`:void 0===e&&t?`?limit=20&time_range=${t}`:e&&t?`?limit=${e}&time_range=${t}`:n}getApiType(e){const t=e.indexOf("v1/me/top/")+10,n=e.indexOf("?");return-1!==n?e.substring(t,n):e.split("v1/me/top/")[1]}errorHandler(e){400===e.response.status&&(k=e.response.data)}}var O=new z;const D={AUTHORIZATION_URL:"https://accounts.spotify.com/authorize?client_id=4bcd4abea30c43359b72b03b45497cad&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fmy-spotify-playlist&scope=user-top-read",ENCODE_TOKEN:"NGJjZDRhYmVhMzBjNDMzNTliNzJiMDNiNDU0OTdjYWQ6Yjc0NzEyYzg5OWZiNDhkNmE5OGQxZjM2YjQzNDE0ZjU="},j=`Basic ${D.ENCODE_TOKEN}`,T="https://accounts.spotify.com/api/token";let N={};class A{getAuthorizationToken(e){const t=new URLSearchParams;return t.append("code",e),t.append("grant_type","authorization_code"),t.append("redirect_uri","http://localhost:8080/my-spotify-playlist"),w.post(`${T}`,t,{headers:{"content-type":"application/x-www-form-urlencoded",Authorization:j}})}async getFreshToken(){const e=window.sessionStorage.getItem("refresh_token"),t=new URLSearchParams;return t.append("grant_type","refresh_token"),t.append("refresh_token",e),w.post(`${T}`,t,{headers:{Authorization:j}})}errorHandler(e){400===e.response.status&&(N=e.response.data)}}var H=new A;const E={class:"container"},x=["href"],I=(0,o._)("div",{class:"d-flex align-items-center"},[(0,o._)("img",{class:"me-2",src:_,alt:"spotifyIcon"}),(0,o._)("span",{class:"text-light"},"LOGIN")],-1),S=[I],U={key:0},P={class:"single-operation-board card"},R=(0,o._)("h3",{class:"font-zh-h3"},"查詢條件",-1),$={id:"searchForm"},Y={class:"card-body"},C={class:"row"},M={class:"col-12"},Z={class:"form-check-group"},B=(0,o._)("p",{class:"font-zh-p-medium"},"資料類型",-1),K={class:"form-check-list d-flex"},L=["id","value","checked"],W=["for"],F={class:"col-12"},q={class:"form-check-group"},G=(0,o._)("p",{class:"font-zh-p-medium"},"時間區間",-1),V={class:"form-check-list d-flex"},Q=["id","value","checked"],J=["for"],X={class:"col-12"},ee={class:"row"},te=(0,o._)("p",{class:"font-zh-p-medium"},"資料筆數",-1),ne={class:"col-6"},ae={class:"form-check-group"},oe={class:"dropdown"},se={class:"default-select font-zh-p-medium form-control",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},re={class:"dropdown-menu"},le={class:"menuBoard","aria-labelledby":"dropdownMenuButton1"},ie=["value"],ce={class:"col-6"},ue=(0,o._)("p",null,"查詢",-1),de=[ue],pe={key:0,class:"table","data-bs-theme":"dark"},fe=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"#"),(0,o._)("th",{scope:"col",colspan:"2"},"演出者"),(0,o._)("th",{scope:"col"},"曲風"),(0,o._)("th",{scope:"col"},"知名度 (0-100)")])],-1),me={scope:"row"},ve=(0,o._)("td",null,null,-1),he={class:"contentInfo"},_e={class:"songName"},ge={class:"text-start"},ye={key:0},be={key:0},we={key:1},ke={key:1,class:"table","data-bs-theme":"dark"},ze=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"#"),(0,o._)("th",{scope:"col",colspan:"2"},"標題"),(0,o._)("th",{scope:"col"},"專輯"),(0,o._)("th",{scope:"col"},[(0,o._)("img",{src:g,alt:"time"})])])],-1),Oe={scope:"row"},De=(0,o._)("td",null,null,-1),je={class:"contentInfo"},Te={class:"songName"},Ne={key:0},Ae={key:0},He={key:1},Ee={class:"text-start"};var xe=(0,o.aZ)({__name:"HelloWorld",setup(e){const t=(0,v.iH)([]),n=(0,v.iH)([]),a=(0,v.iH)(!1),s=(0,v.iH)(""),r=(0,v.iH)(""),l=[{label:"曲目",value:"tracks"},{label:"演出者",value:"artists"}],i=[{label:"近一個月",value:"short_term"},{label:"近六個月",value:"medium_term"},{label:"全部時間",value:"long_term"}],c=[{label:"10",value:"10"},{label:"15",value:"15"},{label:"20",value:"20"},{label:"25",value:"25"},{label:"30",value:"30"},{label:"35",value:"35"},{label:"40",value:"40"},{label:"45",value:"45"},{label:"50",value:"50"}];async function u(e){const t=await H.getAuthorizationToken(e),n=t.data.access_token,a=t.data.refresh_token;return{authorization:n,refreshToken:a}}async function d(e,n){const o=await O.getArtists(e,n);a.value=0===Object.keys(k).length,o&&(s.value=O.getApiType(o?.data.href),t.value=o?.data?.items)}async function p(e,t){const o=await O.getTracks(e,t);a.value=0===Object.keys(k).length,o&&(s.value=O.getApiType(o?.data.href),n.value=o?.data?.items,n.value.forEach((e=>{if("number"===typeof e.duration_ms){const t=Math.floor(e.duration_ms/1e3/60);let n=Math.floor(e.duration_ms/1e3%60);const a=1===n.toString().length?`0${n}`:n;e.duration_ms=`${t}:${a}`}})))}function f(e){r.value=e.target.value}function m(){const e=document.getElementById("searchForm"),t=e.elements.namedItem("dataType"),n=r.value?r.value:"20",a=e.elements.namedItem("timeRange").value;"tracks"===t.value?p(n,a):"artists"===t.value&&d(n,a)}return(0,o.bv)((()=>{const e=new URLSearchParams(window.location.search);if(e.has("code")){const t=e.get("code");u(t).then((e=>(window.sessionStorage.setItem("access_token",e.authorization),window.sessionStorage.setItem("refresh_token",e.refreshToken),a.value=!0,e))).catch((e=>{throw e}))}else window.sessionStorage.removeItem("access_token")})),(e,u)=>((0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("a",{class:"btn btn-success mb-4",href:(0,v.SU)(D).AUTHORIZATION_URL},S,8,x),a.value?((0,o.wg)(),(0,o.iD)("div",U,[(0,o._)("div",P,[R,(0,o._)("form",$,[(0,o._)("div",Y,[(0,o._)("div",C,[(0,o._)("div",M,[(0,o._)("div",Z,[B,(0,o._)("div",K,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(l,(e=>(0,o._)("div",{key:e.value,class:"form-check"},[(0,o._)("input",{id:e.value,value:e.value,class:"form-check-input",name:"dataType",type:"radio",checked:"tracks"===e.value},null,8,L),(0,o._)("label",{for:e.value,class:"font-zh-p-medium form-check-label"},(0,h.zw)(e.label),9,W)]))),64))])])]),(0,o._)("div",F,[(0,o._)("div",q,[G,(0,o._)("div",V,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(i,(e=>(0,o._)("div",{key:e.value,class:"form-check"},[(0,o._)("input",{id:e.value,value:e.value,class:"form-check-input",name:"timeRange",type:"radio",checked:"medium_term"===e.value},null,8,Q),(0,o._)("label",{for:e.value,class:"font-zh-p-medium form-check-label"},(0,h.zw)(e.label),9,J)]))),64))])])]),(0,o._)("div",X,[(0,o._)("div",ee,[te,(0,o._)("div",ne,[(0,o._)("div",ae,[(0,o._)("div",oe,[(0,o._)("button",se,(0,h.zw)(r.value?r.value:"請選擇"),1),(0,o._)("div",re,[(0,o._)("ul",le,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(c,(e=>(0,o._)("li",{key:e.value},[(0,o._)("button",{class:"dropdown-item",type:"button",value:e.value,onClick:u[0]||(u[0]=e=>f(e))},(0,h.zw)(e.label),9,ie)]))),64))])])])])]),(0,o._)("div",ce,[(0,o._)("button",{class:"default-input font-zh-p-medium btn btn-main",type:"button",onClick:u[1]||(u[1]=e=>m())},de)])])])])])])]),"artists"===s.value?((0,o.wg)(),(0,o.iD)("table",pe,[fe,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.value,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:e.uri},[(0,o._)("th",me,(0,h.zw)(t+1),1),ve,(0,o._)("td",he,[(0,o._)("p",_e,(0,h.zw)(e.name),1)]),(0,o._)("td",ge,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.genres,((t,n)=>((0,o.wg)(),(0,o.iD)("span",{key:n,class:"artistsGenres"},[1!==e.genres.length?((0,o.wg)(),(0,o.iD)("span",ye,[0!==n?((0,o.wg)(),(0,o.iD)("span",be,", ")):(0,o.kq)("",!0),(0,o.Uk)((0,h.zw)(t),1)])):((0,o.wg)(),(0,o.iD)("span",we,(0,h.zw)(t),1))])))),128))]),(0,o._)("td",null,(0,h.zw)(e.popularity),1)])))),128))])])):(0,o.kq)("",!0),"tracks"===s.value?((0,o.wg)(),(0,o.iD)("table",ke,[ze,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.value,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:e.uri},[(0,o._)("th",Oe,(0,h.zw)(t+1),1),De,(0,o._)("td",je,[(0,o._)("p",Te,(0,h.zw)(e.name),1),(0,o._)("p",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.artists,((t,n)=>((0,o.wg)(),(0,o.iD)("span",{key:t.id,class:"artistsName"},[1!==e.artists.length?((0,o.wg)(),(0,o.iD)("span",Ne,[0!==n?((0,o.wg)(),(0,o.iD)("span",Ae,", ")):(0,o.kq)("",!0),(0,o.Uk)((0,h.zw)(t.name),1)])):((0,o.wg)(),(0,o.iD)("span",He,(0,h.zw)(t.name),1))])))),128))])]),(0,o._)("td",Ee,(0,h.zw)(e.album.name),1),(0,o._)("td",null,(0,h.zw)(e.duration_ms),1)])))),128))])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)]))}});const Ie=xe;var Se=Ie,Ue=function(e,t,n,a){var o,s=arguments.length,r=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r};let Pe=class extends m.w3{};Pe=Ue([(0,m.Ei)({components:{HelloWorld:Se}})],Pe);var Re=Pe;const $e=(0,l.Z)(Re,[["render",f]]);var Ye=$e;const Ce=[{path:"/",name:"home",component:Ye},{path:"/about",name:"about",component:()=>n.e(939).then(n.bind(n,939))}],Me=(0,d.p7)({history:(0,d.PO)("/my-spotify-playlist/"),routes:Ce});var Ze=Me;n(583);(0,a.ri)(u).use(Ze).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,s){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],s=e[u][2];for(var l=!0,i=0;i<a.length;i++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(l=!1,s<r&&(r=s));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,o,s]}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+".2948671f.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="my-spotify-playlist:";n.l=function(a,o,s,r){if(e[a])e[a].push(o);else{var l,i;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+s){l=d;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+s),l.src=a),e[a]=[o];var p=function(t,n){l.onerror=l.onload=null,clearTimeout(f);var o=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/my-spotify-playlist/"}(),function(){var e={143:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var s=new Promise((function(n,a){o=e[t]=[n,a]}));a.push(o[2]=s);var r=n.p+n.u(t),l=new Error,i=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",l.name="ChunkLoadError",l.type=s,l.request=r,o[1](l)}};n.l(r,i,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,r=a[0],l=a[1],i=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(i)var u=i(n)}for(t&&t(a);c<r.length;c++)s=r[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},a=self["webpackChunkmy_spotify_playlist"]=self["webpackChunkmy_spotify_playlist"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(311)}));a=n.O(a)})();
//# sourceMappingURL=app.6d13eb36.js.map